{"version":3,"sources":["webpack:///webpack/bootstrap b6deac52303a6921038c","webpack:///./src/main.js","webpack:///./~/mainloop.js/build/mainloop.min.js","webpack:///./src/core/screen.js","webpack:///./src/scene/scene.js","webpack:///./src/settings.js","webpack:///./src/scene/newPanels.js","webpack:///./src/core/utility.js","webpack:///./~/husl/husl.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///./src/core/wave.js","webpack:///./src/core/timeKeeper.js","webpack:///./src/core/simplexNoise.js","webpack:///./~/fast-simplex-noise/main.js","webpack:///./src/scene/panel.js","webpack:///./src/core/motionComponent.js","webpack:///./src/scene/panelLayer1.js","webpack:///./src/scene/gridLayout.js","webpack:///./~/lodash/shuffle.js","webpack:///./~/lodash/_arrayShuffle.js","webpack:///./~/lodash/_copyArray.js","webpack:///./~/lodash/_shuffleSelf.js","webpack:///./~/lodash/_baseRandom.js","webpack:///./~/lodash/_baseShuffle.js","webpack:///./~/lodash/values.js","webpack:///./~/lodash/_baseValues.js","webpack:///./~/lodash/_arrayMap.js","webpack:///./~/lodash/keys.js","webpack:///./~/lodash/_arrayLikeKeys.js","webpack:///./~/lodash/_baseTimes.js","webpack:///./~/lodash/isArguments.js","webpack:///./~/lodash/_baseIsArguments.js","webpack:///./~/lodash/isObjectLike.js","webpack:///./~/lodash/isArray.js","webpack:///./~/lodash/isBuffer.js","webpack:///./~/lodash/_root.js","webpack:///./~/lodash/_freeGlobal.js","webpack:///./~/lodash/stubFalse.js","webpack:///./~/lodash/_isIndex.js","webpack:///./~/lodash/isTypedArray.js","webpack:///./~/lodash/_baseIsTypedArray.js","webpack:///./~/lodash/isLength.js","webpack:///./~/lodash/_baseUnary.js","webpack:///./~/lodash/_nodeUtil.js","webpack:///./~/lodash/_baseKeys.js","webpack:///./~/lodash/_isPrototype.js","webpack:///./~/lodash/_nativeKeys.js","webpack:///./~/lodash/_overArg.js","webpack:///./~/lodash/isArrayLike.js","webpack:///./~/lodash/isFunction.js","webpack:///./~/lodash/isObject.js","webpack:///./src/scene/scratchpadScene.js","webpack:///./src/scene/textureGen.js"],"names":["mainLoop","timeKeeper","scene","screen","main","canvas","document","getElementById","context","getContext","width","clientWidth","height","clientHeight","setUpdate","mainUpdate","setDraw","mainDraw","setEnd","mainEnd","start","deltaMs","updateTime","update","interpolationPercentage","resize","clear","draw","fps","panic","discardedTime","Math","round","resetFrameDelta","console","warn","Screen","w","h","imageData","createImageData","color","shadowBlur","clearRect","fillStyle","fillRect","circles","circle","drawCircle","x","y","r","lines","line","drawLine","radians","length","rectangles","shadowSize","shadowColor","shadowOffsetX","shadowOffsetY","rect","imageElement","drawImage","createElement","beginPath","arc","PI","fill","strokeStyle","lineWidth","x2","cos","y2","sin","moveTo","lineTo","stroke","Scene","panels","settings","bgColor","numPanels","panelXMarginFactor","panelYMarginFactor","panelMinWidthFactorOfMargin","panelMaxWidthFactorOfMin","panelMinHeightRatio","panelMaxHeightRatio","panelMinTTL","panelMaxTTL","panelShadowSize","marginPercent","sizeVariation","maxRatioSkew","maxSpeed","min","max","acceleration","minIdle","maxIdle","count","visualDensityPercent","emptyGridPercent","color1","color2","color3","color4","utility","husl","NewPanels","margin","calculateMargin","fieldWidth","x1","fieldHeight","y1","bounds","noiseGen","octaves","frequency","layer1","noise","layers","i","layer","reduce","a","b","concat","getPanelsForDraw","drawRectangles","marginX","marginY","maxX","maxY","randomInt","randomNumber","distance","clamp","scale","scaleFrom","floor","random","hypot","value","delta","result","valueMin","valueMax","newMin","newMax","oldDelta","newDelta","ratio","wave","build","linear","sawtooth","sine","triangle","square","reverse","time","timePeriod","smooth","smoothStep","carrier","config","carrierFrequency","carrierMin","carrierMax","targetMin","targetMax","shift","frequencyMod","phaseMod","targetDelta","carrierDelta","A","B","C","D","c","d","func","getTimeProgress","totalTimeMs","getTotalTimeMs","abs","sign","rad","down","turn","Number","EPSILON","getLastDeltaMs","lastDeltaMs","frequencyHz","periodMs","SimplexNoise","gen","generator","in2D","pixelFunc","makeImageData","data","tone","userPixel","Panel","seedValue","position","midPanelSize","fieldDiameter","now","maxVelocity","sizeMax","sizeMin","squareSide","halfSkew","skew","departAtMs","motion","idleSince","layoutNode","seed","changeAtTotalMs","MotionComponent","xpos","ypos","mass","maxAcceleration","xvel","yvel","targetX","targetY","moving","move","nullMovement","destination","tripLengthMs","moveMap","xorigin","yorigin","xtarget","ytarget","beginTime","moveFunc","percentDone","newX","newY","PanelLayer1","panelCount","grid","makeGrid","area","fauxDiameter","makePanels","screenSize","swayPauseMs","panel","nodeSpot","changePosition","distanceToTarget","idleAfter","fixedAnimateToward","xscale","yscale","xShift","yShift","timeScale","totalSlots","ceil","fieldArea","positions","getNewPositions","uniformPortion","slice","offset","calculateMidPanelSize","Array","from","v","k","sort","calculatePanelTextures","midSize","sqrt","GridLayout","slotCount","createPositions","empties","empty","n","take","rest","oldPosition","next","push","half","screenRatio","columns","rows","rise","run","j","newPosition","textureGen","ScratchpadScene","virtualContext","buffer","virtualScreen","drawImageStretch","distanceFromCenter","fmod","ripple","getFilledImageData","hue","s","light","l","rgb","toRGB","bytes","putImageData","centerX","centerY","radius"],"mappings":"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;AACH;;AAEM,UAASN,SAAT,CAAmBI,KAAnB,EAA0BG,QAA1B,EAAoCC,QAApC,EAA8CC,MAA9C,EAAsDC,MAAtD,EAA8D;AACjE,SAAMC,WAAWH,WAAWD,QAA5B;AACA,SAAMK,WAAWF,SAASD,MAA1B;AACA;AACA,SAAMI,QAAQD,WAAWD,QAAzB;AACA;AACA,SAAML,SAAS,CAACF,QAAQG,QAAT,IAAqBM,KAArB,GAA6BJ,MAA5C;AACA,YAAOH,MAAP;AACH,E;;;;;;mEC9BD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,UAAU;AAC5C;AACA;AACA;AACA,sCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAuC,gCAAgC;AACvE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA,cAAa;AACb,cAAa;AACb,cAAa;AACb,eAAc;AACd,gBAAe;AACf,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAoC,UAAU;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAC;;;;;;;;AC7XD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA,8BAA6B,mDAAmD;;;;;;;;;;;;;ACAhF;;KAAYnJ,U;;;;AAEZ,KAAI2J,OAAOC,KAAX;AACAD,MAAKE,MAAL,GAAcA,MAAd;AACAF,MAAKG,QAAL,GAAgBA,QAAhB;AACAH,MAAKI,IAAL,GAAYA,IAAZ;AACAJ,MAAKK,QAAL,GAAgBA,QAAhB;AA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AACA;AACA;;AAEA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA,IAAG,OAAO;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB,cAAa,QAAQ,QAAQ,QAAQ,QAAQ;AAC7C,MAAK,qBAAqB;AAC1B,cAAa,QAAQ,QAAQ,QAAQ,QAAQ;AAC7C,MAAK,OAAO;AACZ,cAAa,QAAQ,QAAQ,QAAQ,QAAQ;AAC7C;AACA,IAAG,OAAO;AACV,mBAAkB;AAClB,cAAa,QAAQ,QAAQ,QAAQ,QAAQ;AAC7C,MAAK,oBAAoB;AACzB,cAAa,QAAQ,QAAQ,QAAQ,QAAQ;AAC7C,MAAK,OAAO;AACZ,cAAa,QAAQ,QAAQ,QAAQ,QAAQ;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC/gBA;;;;AACA;;;;AACA;;KAAY5F,O;;AACZ;;;;AACA;;KAAY5G,U;;;;;;;;AAEZ,KAAMiN;AACF;AACA;AACA;AACA,gBAAYC,SAAZ,EAAuBC,QAAvB,EAAiCC,YAAjC,EAA+CC,aAA/C,EAA8D;AAAA;;AAC1D,SAAMC,MAAMtN,WAAW4L,cAAX,EAAZ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AEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;ACjBA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,aAAa;AACxB,cAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;;;;;;;ACdA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACjCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,YAAW,QAAQ;AACnB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,cAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA,8BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA,+CAA8C,kBAAkB,EAAE;AAClE;AACA;AACA;;AAEA;;;;;;;ACnCA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzBA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACrCA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACRA;AACA;;AAEA;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACjBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC1BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClCA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACbA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;AAED;;;;;;;;ACrBA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7BA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACjBA;;AAEA;AACA;;AAEA;;;;;;;ACLA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACdA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChCA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;AC9BA;;;;AACA;;KAAYmB,U;;AACZ;;;;;;;;;;AAEA,KAAMC;AACF,8BAAYlT,MAAZ,EAAoB;AAAA;;AAChB,cAAKA,MAAL,GAAcA,MAAd;AACA,aAAME,SAASF,OAAOE,MAAtB;AACA,aAAMK,QAAQL,OAAOK,KAArB;AACA,aAAME,SAASP,OAAOO,MAAtB;AACA,aAAMJ,UAAU,iBAAO8S,cAAP,CAAsB,GAAtB,EAA2B,OAAO1S,SAASF,KAAhB,CAA3B,CAAhB;AACA,cAAK6S,MAAL,GAAc/S,QAAQH,MAAtB;AACA,aAAMmT,gBAAgB,qBAAWhT,OAAX,CAAtB;AACA4S,oBAAWzR,IAAX,CAAgB6R,aAAhB;AACH;;AAVC;AAAA;AAAA,kCAYO,CACR;AAbC;AAAA;AAAA,gCAeK;AACH,kBAAKrT,MAAL,CAAYsT,gBAAZ,CAA6B,KAAKF,MAAlC;AACH;AAjBC;;AAAA;AAAA,IAAN;;mBAoBeF,e;;;;;;;;;;;SCnBC1R,I,GAAAA,I;;AALhB;;KAAYmF,I;;AACZ;;;;AACA;;KAAYD,O;;AACZ;;;;;;;;AAEO,UAASlF,IAAT,CAAcxB,MAAd,EAAsB;AACzB,SAAMO,QAAQP,OAAOO,KAArB;AACA,SAAME,SAAST,OAAOS,MAAtB;AACA,SAAM2G,WAAW,2BAAiB;AAC9BC,kBAAS,CADqB;AAE9BvB,cAAK,CAFyB;AAG9BC,cAAK,CAHyB;AAI9BuB,oBAAW,IAAE;AAJiB,MAAjB,CAAjB;AAMA,SAAMkB,WAAW+K,mBAAmBhT,KAAnB,EAA0BE,MAA1B,CAAjB;AACA,SAAM+S,OAAO,oBAAK;AAAA,gBAAK,eAAK3J,IAAL,CAAU/G,CAAV,CAAL;AAAA,MAAL,EAAwB,EAACwE,WAAW,CAAZ,EAAxB,CAAb;AACA,SAAMmM,SAAS,oBAAK;AAAA,gBAChB,eAAK3J,QAAL,CAAc,eAAKD,IAAL,CAAU/G,CAAV,CAAd,CADgB;AAAA,MAAL,EAEX,EAACwE,WAAW,IAAE,CAAd,EAFW,CAAf;AAIA,SAAMlF,YAAYgF,SAASsM,kBAAT,CAA4B1T,MAA5B,EAAoC,UAAC8C,CAAD,EAAIC,CAAJ,EAAOgG,KAAP,EAAiB;AACnE;AACA,aAAM4K,MAAM5K,QAAQ,CAAR,GACNA,QAASA,QAAQ,CADX,GAENA,KAFN;AAGA,aAAM5G,IAAIsR,OAAOE,GAAP,KAAe,MAAM,EAArB,IAA2B,EAArC;AACA,aAAMC,IAAI,GAAV;AACA,aAAMC,QAAQ9K,QAAQ;AAClB;AADU,WAERA,QAASA,QAAQ,CAFT,GAGRA,KAHN;AAIA,aAAM+K,IAAIL,OAAOI,KAAP,KAAiB,KAAK,EAAtB,IAA4B,EAAtC;AACA,aAAME,MAAMpN,KAAKqN,KAAL,CAAW7R,CAAX,EAAcyR,CAAd,EAAiBE,CAAjB,CAAZ;AACA,aAAMG,QAAQF,GAAd;AACA,gBAAOE,KAAP;AACH,MAfiB,CAAlB;AAgBAjU,YAAOK,OAAP,CAAe6T,YAAf,CAA4B9R,SAA5B,EAAuC,CAAvC,EAA0C,CAA1C;AACH;;AAED,UAASmR,kBAAT,CAA4BhT,KAA5B,EAAmCE,MAAnC,EAA2C;AACvC,SAAM0T,UAAU5T,QAAQ,CAAxB;AACA,SAAM6T,UAAU3T,SAAS,CAAzB;AACA,SAAM4T,SAASzS,KAAKkH,KAAL,CAAWqL,OAAX,EAAoBC,OAApB,CAAf;AACA,SAAM5L,WAAW,SAAXA,QAAW,CAAC1F,CAAD,EAAGC,CAAH,EAAS;AACtB,gBAAOnB,KAAKkH,KAAL,CAAWhG,IAAIqR,OAAf,EAAwBpR,IAAIqR,OAA5B,IAAuCC,MAA9C;AACH,MAFD;AAGA,YAAO7L,QAAP;AACH,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b6deac52303a6921038c\n **/","import * as mainLoop from \"mainloop.js\";\r\nimport Screen from \"./core/screen.js\";\r\nimport Scene from \"./scene/scene.js\";\r\nimport * as timeKeeper from \"./core/timeKeeper.js\";\r\nimport settings from \"./settings.js\";\r\nimport ScratchpadScene from \"./scene/scratchpadScene.js\";\r\nimport SimplexNoise from \"./core/simplexNoise.js\";\r\n\r\nvar scene;\r\nvar screen;\r\n\r\nfunction main() {\r\n    const canvas = document.getElementById(\"canvas\");\r\n    const context = canvas.getContext(\"2d\");\r\n    const width = canvas.clientWidth;\r\n    const height = canvas.clientHeight;\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    screen = new Screen(context);\r\n    scene = new Scene(screen);\r\n    //scene = new ScratchpadScene(screen);\r\n    mainLoop.setUpdate(mainUpdate);\r\n    mainLoop.setDraw(mainDraw);\r\n    mainLoop.setEnd(mainEnd);\r\n    mainLoop.start();\r\n}\r\n\r\nfunction mainUpdate(deltaMs) {\r\n    timeKeeper.updateTime(deltaMs);\r\n    scene.update();\r\n}\r\n\r\nfunction mainDraw(interpolationPercentage) {\r\n    screen.resize();\r\n    screen.clear();\r\n    scene.draw();\r\n}\r\n\r\nfunction mainEnd(fps, panic) {\r\n    if(panic) {\r\n        var discardedTime = Math.round(mainLoop.resetFrameDelta());\r\n        console.warn(\"Main loop panicked, probably because the browser tab was put in the background. Discarding \" + discardedTime + \"ms\");\r\n    }\r\n}\r\n\r\nmain();\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","/**\n * mainloop.js 1.0.3-20160320\n *\n * @author Isaac Sukin (http://www.isaacsukin.com/)\n * @license MIT\n */\n\n!function(a){function b(a){if(v=o(b),!(e+j>a)){for(d+=a-e,e=a,r(a,d),a>g+1e3&&(f=.25*h+.75*f,g=a,h=0),h++,i=0;d>=c;)if(s(c),d-=c,++i>=240){m=!0;break}t(d/c),u(f,m),m=!1}}var c=1e3/60,d=0,e=0,f=60,g=0,h=0,i=0,j=0,k=!1,l=!1,m=!1,n=\"object\"==typeof window?window:a,o=n.requestAnimationFrame||function(){var a=Date.now(),b,d;return function(e){return b=Date.now(),d=Math.max(0,c-(b-a)),a=b+d,setTimeout(function(){e(b+d)},d)}}(),p=n.cancelAnimationFrame||clearTimeout,q=function(){},r=q,s=q,t=q,u=q,v;a.MainLoop={getSimulationTimestep:function(){return c},setSimulationTimestep:function(a){return c=a,this},getFPS:function(){return f},getMaxAllowedFPS:function(){return 1e3/j},setMaxAllowedFPS:function(a){return\"undefined\"==typeof a&&(a=1/0),0===a?this.stop():j=1e3/a,this},resetFrameDelta:function(){var a=d;return d=0,a},setBegin:function(a){return r=a||r,this},setUpdate:function(a){return s=a||s,this},setDraw:function(a){return t=a||t,this},setEnd:function(a){return u=a||u,this},start:function(){return l||(l=!0,v=o(function(a){t(1),k=!0,e=a,g=a,h=0,v=o(b)})),this},stop:function(){return k=!1,l=!1,p(v),this},isRunning:function(){return k}},\"function\"==typeof define&&define.amd?define(a.MainLoop):\"object\"==typeof module&&null!==module&&\"object\"==typeof module.exports&&(module.exports=a.MainLoop)}(this);\n//# sourceMappingURL=mainloop.min.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mainloop.js/build/mainloop.min.js\n ** module id = 1\n ** module chunks = 0\n **/","const Screen = class Screen {\r\n    constructor(context) {\r\n        const canvas = context.canvas;\r\n        this.canvas = canvas;\r\n        this.context = context;\r\n        this.width = canvas.width;\r\n        this.height = canvas.height;\r\n    }\r\n\r\n    static virtualContext(width, height) {\r\n        const canvas = document.createElement(\"canvas\");\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        const context = canvas.getContext(\"2d\");\r\n        return context;\r\n    }\r\n\r\n    makeImageData(width, height) {\r\n        const w = width || this.width;\r\n        const h = height || this.height;\r\n        const imageData = this.context.createImageData(w, h);\r\n        return imageData;\r\n    }\r\n\r\n    clear(color) {\r\n        this.context.shadowBlur = 0;\r\n        if(!color) {\r\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n            return;\r\n        }\r\n        this.context.fillStyle = color;\r\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n\r\n    resize() {\r\n        const width = this.canvas.clientWidth;\r\n        const height = this.canvas.clientHeight;\r\n        if(this.canvas.width != width || this.canvas.height != height) {\r\n            this.canvas.width = width;\r\n            this.canvas.height = height;\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n    }\r\n\r\n    drawCircles(circles) {\r\n        for(const circle of circles) {\r\n            drawCircle(this.context, circle.x, circle.y, circle.r, circle.color);\r\n        }\r\n    }\r\n\r\n    drawLines(lines) {\r\n        for(const line of lines) {\r\n            drawLine(this.context, line.x, line.y, line.radians, line.length);\r\n        }\r\n    }\r\n\r\n    drawRectangles(rectangles, shadowSize) {\r\n        if(shadowSize) {\r\n            this.context.shadowColor = \"#322\";\r\n            this.context.shadowBlur = shadowSize;\r\n            this.context.shadowOffsetX = 13;\r\n            this.context.shadowOffsetY = 14;\r\n        }\r\n        for(const rect of rectangles) {\r\n            this.context.fillStyle = rect.color;\r\n            this.context.fillRect(rect.x, rect.y, rect.width, rect.height);\r\n        }\r\n    }\r\n\r\n    drawImageStretch(imageElement) {\r\n        const width = this.canvas.width;\r\n        const height = this.canvas.height;\r\n        this.context.drawImage(imageElement, 0, 0, width, height);\r\n    }\r\n};\r\n\r\nfunction drawCircle(context, x, y, r, fillStyle) {\r\n    context.beginPath();\r\n    context.arc(x, y, r, 0, 2 * Math.PI, false);\r\n    if (fillStyle) {\r\n        context.fillStyle = fillStyle;\r\n    }\r\n    context.fill();\r\n}\r\n\r\nfunction drawLine(context, x, y, length, radians, strokeStyle, lineWidth) {\r\n    var x2 = x + length * Math.cos(radians);\r\n    var y2 = y + length * Math.sin(radians);\r\n    context.beginPath();\r\n    context.moveTo(x, y);\r\n    context.lineTo(x2, y2);\r\n    if (strokeStyle) {\r\n        context.strokeStyle = strokeStyle;\r\n    }\r\n    if (lineWidth) {\r\n        context.lineWidth = lineWidth;\r\n    }\r\n    context.stroke();\r\n}\r\n\r\nexport default Screen;\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/screen.js\n **/","import settings from \"../settings.js\";\r\nimport NewPanels from \"./newPanels.js\";\r\n\r\nconst Scene = class Scene {\r\n    constructor(screen) {\r\n        this.panels = new NewPanels(screen);\r\n        this.screen = screen;\r\n    }\r\n\r\n    update() {\r\n        this.panels.update();\r\n    }\r\n\r\n    draw() {\r\n        this.panels.draw();\r\n    }\r\n};\r\n\r\nexport default Scene;\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/scene.js\n **/","const settings = {\r\n    bgColor: \"#bdad9e\",\r\n    numPanels: 55,\r\n    panelXMarginFactor: 0.05,\r\n    panelYMarginFactor: 0.05,\r\n    panelMinWidthFactorOfMargin: 0.4,\r\n    panelMaxWidthFactorOfMin: 2.4,\r\n    panelMinHeightRatio: 0.9,\r\n    panelMaxHeightRatio: 2.6,\r\n    panelMinTTL: 4700,\r\n    panelMaxTTL: 8133,\r\n    panelShadowSize: 10,\r\n    //---------------\r\n    marginPercent: 0.05,\r\n    panels: {\r\n        sizeVariation: 1.7, //higher = smallest and largest panels are more different. 2 = the largest panel will be double the smallest.\r\n        maxRatioSkew: 0, //maximum difference in ratio between widest and tallest panels. ex: 0.2 means ratios can range from 0.9 to 1.1\r\n        maxSpeed: {min: 0.08, max: 0.65}, //fastest a panel can move, varying on panel value. 0 = cannot move. 1 = can travel the screen in 1 second.\r\n        acceleration: {min: 0, max: 0}, //something\r\n        minIdle: {min: 9000, max: 15000}, //shortest idle time (ms) before moving again, varying with panel value.\r\n        maxIdle: {min: 24000, max: 135000}, //longest idle time (ms) before moving again, varying with panel value.\r\n        //sway?\r\n        marginPercent: 0.05,\r\n        count: 68,\r\n        visualDensityPercent: 1.05, //percentage of total area matched by area of panels (assuming no overlap)\r\n        emptyGridPercent: 0.012, //what percentage of slots are not occupied by panels at any given time\r\n        color1: \"#c20a02\", //red\r\n        color2: \"#f48102\", //orange\r\n        color3: \"#eccc07\", //yellow\r\n        color4: \"#e7d9ac\" //light pale yellow\r\n    }\r\n};\r\n\r\nexport default settings;\n\n\n/** WEBPACK FOOTER **\n ** ./src/settings.js\n **/","import * as utility from \"../core/utility.js\";\r\nimport * as husl from \"husl\";\r\nimport wave from \"../core/wave.js\";\r\nimport * as timeKeeper from \"../core/timeKeeper.js\";\r\nimport SimplexNoise from \"../core/simplexNoise.js\";\r\nimport settings from \"../settings.js\";\r\nimport Panel from \"./panel.js\";\r\nimport PanelLayer1 from \"./panelLayer1.js\";\r\nimport GridLayout from \"./gridLayout.js\";\r\n\r\nconst NewPanels = class NewPanels {\r\n    constructor(screen) {\r\n        const width = screen.width;\r\n        const height = screen.height;\r\n        const margin = calculateMargin(width, height);\r\n        const fieldWidth = margin.x2 - margin.x1;\r\n        const fieldHeight = margin.y2 - margin.y1;\r\n        const bounds = {x: margin.x1, y: margin.y1, width: fieldWidth, height: fieldHeight};\r\n        const noiseGen = new SimplexNoise({\r\n            octaves: 1,\r\n            min: 0,\r\n            max: 1,\r\n            frequency: 1/29\r\n        });\r\n        const layer1 = new PanelLayer1(bounds);\r\n        \r\n        this.screen = screen;\r\n        this.margin = margin;\r\n        this.noise = noiseGen;\r\n        this.layers = [layer1];\r\n    }\r\n\r\n    update() {\r\n        //const now = timeKeeper.getTotalTimeMs();\r\n        for(let i = 0; i < this.layers.length; i++) {\r\n            const layer = this.layers[i];\r\n            layer.update();\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        const panels = this.layers.reduce((a,b) => a.concat(b.getPanelsForDraw()), []);\r\n        this.screen.drawRectangles(panels, 22);\r\n        //this.screen.drawCircles(this.grid.empty.map(x => { return {x: x.x, y: x.y, r: 20, color: \"#0ff\"}; }));\r\n    }\r\n};\r\n\r\nfunction calculateMargin(width, height) {\r\n    const marginX = width * settings.panels.marginPercent;\r\n    const marginY = height * settings.panels.marginPercent;\r\n    const maxX = width - marginX;\r\n    const maxY = height - marginY;\r\n    return {\r\n        x1: marginX,\r\n        y1: marginY,\r\n        x2: maxX,\r\n        y2: maxY\r\n    };\r\n}\r\n\r\nexport default NewPanels;\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/newPanels.js\n **/","export function randomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport function randomNumber(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nexport function distance(a, b) {\r\n    return Math.hypot(b.x - a.x, b.y - a.y);\r\n}\r\n\r\nexport function clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n\r\nexport function scale(value, min, max) {\r\n    const delta = max - min;\r\n    const result = value * delta + min;\r\n    return result;\r\n}\r\n\r\nexport function scaleFrom(value, valueMin, valueMax, newMin, newMax) {\r\n    const oldDelta = valueMax - valueMin;\r\n    const newDelta = newMax - newMin;\r\n    //difference in scale between old range and new range\r\n    const ratio = newDelta / oldDelta;\r\n    //shift the value so zero is the min, then scale by the ratio, then shift to the new min.\r\n    const result = (value - valueMin) * ratio + newMin;\r\n    return result;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utility.js\n **/","// Generated by CoffeeScript 1.9.3\n(function() {\n  var L_to_Y, Y_to_L, conv, distanceFromPole, dotProduct, epsilon, fromLinear, getBounds, intersectLineLine, kappa, lengthOfRayUntilIntersect, m, m_inv, maxChromaForLH, maxSafeChromaForL, refU, refV, root, toLinear;\n\n  m = {\n    R: [3.2409699419045214, -1.5373831775700935, -0.49861076029300328],\n    G: [-0.96924363628087983, 1.8759675015077207, 0.041555057407175613],\n    B: [0.055630079696993609, -0.20397695888897657, 1.0569715142428786]\n  };\n\n  m_inv = {\n    X: [0.41239079926595948, 0.35758433938387796, 0.18048078840183429],\n    Y: [0.21263900587151036, 0.71516867876775593, 0.072192315360733715],\n    Z: [0.019330818715591851, 0.11919477979462599, 0.95053215224966058]\n  };\n\n  refU = 0.19783000664283681;\n\n  refV = 0.468319994938791;\n\n  kappa = 903.2962962962963;\n\n  epsilon = 0.0088564516790356308;\n\n  getBounds = function(L) {\n    var bottom, channel, j, k, len1, len2, m1, m2, m3, ref, ref1, ref2, ret, sub1, sub2, t, top1, top2;\n    sub1 = Math.pow(L + 16, 3) / 1560896;\n    sub2 = sub1 > epsilon ? sub1 : L / kappa;\n    ret = [];\n    ref = ['R', 'G', 'B'];\n    for (j = 0, len1 = ref.length; j < len1; j++) {\n      channel = ref[j];\n      ref1 = m[channel], m1 = ref1[0], m2 = ref1[1], m3 = ref1[2];\n      ref2 = [0, 1];\n      for (k = 0, len2 = ref2.length; k < len2; k++) {\n        t = ref2[k];\n        top1 = (284517 * m1 - 94839 * m3) * sub2;\n        top2 = (838422 * m3 + 769860 * m2 + 731718 * m1) * L * sub2 - 769860 * t * L;\n        bottom = (632260 * m3 - 126452 * m2) * sub2 + 126452 * t;\n        ret.push([top1 / bottom, top2 / bottom]);\n      }\n    }\n    return ret;\n  };\n\n  intersectLineLine = function(line1, line2) {\n    return (line1[1] - line2[1]) / (line2[0] - line1[0]);\n  };\n\n  distanceFromPole = function(point) {\n    return Math.sqrt(Math.pow(point[0], 2) + Math.pow(point[1], 2));\n  };\n\n  lengthOfRayUntilIntersect = function(theta, line) {\n    var b1, len, m1;\n    m1 = line[0], b1 = line[1];\n    len = b1 / (Math.sin(theta) - m1 * Math.cos(theta));\n    if (len < 0) {\n      return null;\n    }\n    return len;\n  };\n\n  maxSafeChromaForL = function(L) {\n    var b1, j, len1, lengths, m1, ref, ref1, x;\n    lengths = [];\n    ref = getBounds(L);\n    for (j = 0, len1 = ref.length; j < len1; j++) {\n      ref1 = ref[j], m1 = ref1[0], b1 = ref1[1];\n      x = intersectLineLine([m1, b1], [-1 / m1, 0]);\n      lengths.push(distanceFromPole([x, b1 + x * m1]));\n    }\n    return Math.min.apply(Math, lengths);\n  };\n\n  maxChromaForLH = function(L, H) {\n    var hrad, j, l, len1, lengths, line, ref;\n    hrad = H / 360 * Math.PI * 2;\n    lengths = [];\n    ref = getBounds(L);\n    for (j = 0, len1 = ref.length; j < len1; j++) {\n      line = ref[j];\n      l = lengthOfRayUntilIntersect(hrad, line);\n      if (l !== null) {\n        lengths.push(l);\n      }\n    }\n    return Math.min.apply(Math, lengths);\n  };\n\n  dotProduct = function(a, b) {\n    var i, j, ref, ret;\n    ret = 0;\n    for (i = j = 0, ref = a.length - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n      ret += a[i] * b[i];\n    }\n    return ret;\n  };\n\n  fromLinear = function(c) {\n    if (c <= 0.0031308) {\n      return 12.92 * c;\n    } else {\n      return 1.055 * Math.pow(c, 1 / 2.4) - 0.055;\n    }\n  };\n\n  toLinear = function(c) {\n    var a;\n    a = 0.055;\n    if (c > 0.04045) {\n      return Math.pow((c + a) / (1 + a), 2.4);\n    } else {\n      return c / 12.92;\n    }\n  };\n\n  conv = {\n    'xyz': {},\n    'luv': {},\n    'lch': {},\n    'husl': {},\n    'huslp': {},\n    'rgb': {},\n    'hex': {}\n  };\n\n  conv.xyz.rgb = function(tuple) {\n    var B, G, R;\n    R = fromLinear(dotProduct(m.R, tuple));\n    G = fromLinear(dotProduct(m.G, tuple));\n    B = fromLinear(dotProduct(m.B, tuple));\n    return [R, G, B];\n  };\n\n  conv.rgb.xyz = function(tuple) {\n    var B, G, R, X, Y, Z, rgbl;\n    R = tuple[0], G = tuple[1], B = tuple[2];\n    rgbl = [toLinear(R), toLinear(G), toLinear(B)];\n    X = dotProduct(m_inv.X, rgbl);\n    Y = dotProduct(m_inv.Y, rgbl);\n    Z = dotProduct(m_inv.Z, rgbl);\n    return [X, Y, Z];\n  };\n\n  Y_to_L = function(Y) {\n    if (Y <= epsilon) {\n      return Y * kappa;\n    } else {\n      return 116 * Math.pow(Y, 1 / 3) - 16;\n    }\n  };\n\n  L_to_Y = function(L) {\n    if (L <= 8) {\n      return L / kappa;\n    } else {\n      return Math.pow((L + 16) / 116, 3);\n    }\n  };\n\n  conv.xyz.luv = function(tuple) {\n    var L, U, V, X, Y, Z, varU, varV;\n    X = tuple[0], Y = tuple[1], Z = tuple[2];\n    if (Y === 0) {\n      return [0, 0, 0];\n    }\n    L = Y_to_L(Y);\n    varU = (4 * X) / (X + (15 * Y) + (3 * Z));\n    varV = (9 * Y) / (X + (15 * Y) + (3 * Z));\n    U = 13 * L * (varU - refU);\n    V = 13 * L * (varV - refV);\n    return [L, U, V];\n  };\n\n  conv.luv.xyz = function(tuple) {\n    var L, U, V, X, Y, Z, varU, varV;\n    L = tuple[0], U = tuple[1], V = tuple[2];\n    if (L === 0) {\n      return [0, 0, 0];\n    }\n    varU = U / (13 * L) + refU;\n    varV = V / (13 * L) + refV;\n    Y = L_to_Y(L);\n    X = 0 - (9 * Y * varU) / ((varU - 4) * varV - varU * varV);\n    Z = (9 * Y - (15 * varV * Y) - (varV * X)) / (3 * varV);\n    return [X, Y, Z];\n  };\n\n  conv.luv.lch = function(tuple) {\n    var C, H, Hrad, L, U, V;\n    L = tuple[0], U = tuple[1], V = tuple[2];\n    C = Math.sqrt(Math.pow(U, 2) + Math.pow(V, 2));\n    if (C < 0.00000001) {\n      H = 0;\n    } else {\n      Hrad = Math.atan2(V, U);\n      H = Hrad * 360 / 2 / Math.PI;\n      if (H < 0) {\n        H = 360 + H;\n      }\n    }\n    return [L, C, H];\n  };\n\n  conv.lch.luv = function(tuple) {\n    var C, H, Hrad, L, U, V;\n    L = tuple[0], C = tuple[1], H = tuple[2];\n    Hrad = H / 360 * 2 * Math.PI;\n    U = Math.cos(Hrad) * C;\n    V = Math.sin(Hrad) * C;\n    return [L, U, V];\n  };\n\n  conv.husl.lch = function(tuple) {\n    var C, H, L, S, max;\n    H = tuple[0], S = tuple[1], L = tuple[2];\n    if (L > 99.9999999 || L < 0.00000001) {\n      C = 0;\n    } else {\n      max = maxChromaForLH(L, H);\n      C = max / 100 * S;\n    }\n    return [L, C, H];\n  };\n\n  conv.lch.husl = function(tuple) {\n    var C, H, L, S, max;\n    L = tuple[0], C = tuple[1], H = tuple[2];\n    if (L > 99.9999999 || L < 0.00000001) {\n      S = 0;\n    } else {\n      max = maxChromaForLH(L, H);\n      S = C / max * 100;\n    }\n    return [H, S, L];\n  };\n\n  conv.huslp.lch = function(tuple) {\n    var C, H, L, S, max;\n    H = tuple[0], S = tuple[1], L = tuple[2];\n    if (L > 99.9999999 || L < 0.00000001) {\n      C = 0;\n    } else {\n      max = maxSafeChromaForL(L);\n      C = max / 100 * S;\n    }\n    return [L, C, H];\n  };\n\n  conv.lch.huslp = function(tuple) {\n    var C, H, L, S, max;\n    L = tuple[0], C = tuple[1], H = tuple[2];\n    if (L > 99.9999999 || L < 0.00000001) {\n      S = 0;\n    } else {\n      max = maxSafeChromaForL(L);\n      S = C / max * 100;\n    }\n    return [H, S, L];\n  };\n\n  conv.rgb.hex = function(tuple) {\n    var ch, hex, j, len1;\n    hex = \"#\";\n    for (j = 0, len1 = tuple.length; j < len1; j++) {\n      ch = tuple[j];\n      ch = Math.round(ch * 1e6) / 1e6;\n      if (ch < 0 || ch > 1) {\n        throw new Error(\"Illegal rgb value: \" + ch);\n      }\n      ch = Math.round(ch * 255).toString(16);\n      if (ch.length === 1) {\n        ch = \"0\" + ch;\n      }\n      hex += ch;\n    }\n    return hex;\n  };\n\n  conv.hex.rgb = function(hex) {\n    var b, g, j, len1, n, r, ref, results;\n    if (hex.charAt(0) === \"#\") {\n      hex = hex.substring(1, 7);\n    }\n    r = hex.substring(0, 2);\n    g = hex.substring(2, 4);\n    b = hex.substring(4, 6);\n    ref = [r, g, b];\n    results = [];\n    for (j = 0, len1 = ref.length; j < len1; j++) {\n      n = ref[j];\n      results.push(parseInt(n, 16) / 255);\n    }\n    return results;\n  };\n\n  conv.lch.rgb = function(tuple) {\n    return conv.xyz.rgb(conv.luv.xyz(conv.lch.luv(tuple)));\n  };\n\n  conv.rgb.lch = function(tuple) {\n    return conv.luv.lch(conv.xyz.luv(conv.rgb.xyz(tuple)));\n  };\n\n  conv.husl.rgb = function(tuple) {\n    return conv.lch.rgb(conv.husl.lch(tuple));\n  };\n\n  conv.rgb.husl = function(tuple) {\n    return conv.lch.husl(conv.rgb.lch(tuple));\n  };\n\n  conv.huslp.rgb = function(tuple) {\n    return conv.lch.rgb(conv.huslp.lch(tuple));\n  };\n\n  conv.rgb.huslp = function(tuple) {\n    return conv.lch.huslp(conv.rgb.lch(tuple));\n  };\n\n  root = {};\n\n  root.fromRGB = function(R, G, B) {\n    return conv.rgb.husl([R, G, B]);\n  };\n\n  root.fromHex = function(hex) {\n    return conv.rgb.husl(conv.hex.rgb(hex));\n  };\n\n  root.toRGB = function(H, S, L) {\n    return conv.husl.rgb([H, S, L]);\n  };\n\n  root.toHex = function(H, S, L) {\n    return conv.rgb.hex(conv.husl.rgb([H, S, L]));\n  };\n\n  root.p = {};\n\n  root.p.toRGB = function(H, S, L) {\n    return conv.xyz.rgb(conv.luv.xyz(conv.lch.luv(conv.huslp.lch([H, S, L]))));\n  };\n\n  root.p.toHex = function(H, S, L) {\n    return conv.rgb.hex(conv.xyz.rgb(conv.luv.xyz(conv.lch.luv(conv.huslp.lch([H, S, L])))));\n  };\n\n  root.p.fromRGB = function(R, G, B) {\n    return conv.lch.huslp(conv.luv.lch(conv.xyz.luv(conv.rgb.xyz([R, G, B]))));\n  };\n\n  root.p.fromHex = function(hex) {\n    return conv.lch.huslp(conv.luv.lch(conv.xyz.luv(conv.rgb.xyz(conv.hex.rgb(hex)))));\n  };\n\n  root._conv = conv;\n\n  root._getBounds = getBounds;\n\n  root._maxChromaForLH = maxChromaForLH;\n\n  root._maxSafeChromaForL = maxSafeChromaForL;\n\n  if (!((typeof module !== \"undefined\" && module !== null) || (typeof jQuery !== \"undefined\" && jQuery !== null) || (typeof requirejs !== \"undefined\" && requirejs !== null))) {\n    this.HUSL = root;\n  }\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = root;\n  }\n\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n    jQuery.husl = root;\n  }\n\n  if ((typeof requirejs !== \"undefined\" && requirejs !== null) && (typeof define !== \"undefined\" && define !== null)) {\n    define(root);\n  }\n\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/husl/husl.js\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 9\n ** module chunks = 0\n **/","import * as timeKeeper from \"./timeKeeper.js\";\r\n\r\nlet wave = build;\r\nwave.linear = linear;\r\nwave.sawtooth = sawtooth;\r\nwave.sine = sine;\r\nwave.triangle = triangle;\r\nwave.square = square;\r\nwave.round = round;\r\nwave.reverse = reverse;\r\nwave.time = time;\r\nwave.timePeriod = timePeriod;\r\nwave.smooth = smoothStep;\r\nexport default wave;\r\n\r\n/**\r\n * config options:\r\n * frequency\r\n * shift\r\n * min\r\n * max\r\n * frequencyMod\r\n * phaseMod\r\n * carrierMin\r\n * carrierMax\r\n * carrierFrequency\r\n */\r\nfunction build(carrier, config) {\r\n    if(!carrier || typeof carrier !== \"function\") {\r\n        return x => carrier;\r\n    }\r\n    if(!config) {\r\n        return carrier;\r\n    }\r\n    const carrierFrequency = config.carrierFrequency || 1;\r\n    const carrierMin = config.carrierMin || 0;\r\n    const carrierMax = config.carrierMax || 1;\r\n    const targetMin = config.min || 0;\r\n    const targetMax = config.max || 1;\r\n    const frequency = config.frequency || 1;\r\n    const shift = config.shift || 0;\r\n    const frequencyMod = config.frequencyMod || (x => 1);\r\n    const phaseMod = config.phaseMod || (x => 0);\r\n    const targetDelta = targetMax - targetMin;\r\n    const carrierDelta = carrierMax - carrierMin;\r\n\r\n    const A = carrierDelta != 0\r\n        ? targetDelta / carrierDelta\r\n        : 0;\r\n    const B = carrierFrequency != 0\r\n        ? frequency / carrierFrequency\r\n        : 0;\r\n    const C = -shift;\r\n    const D = targetMin - carrierMin;\r\n\r\n    const result = x => {\r\n        const a = A;\r\n        const b = B * frequencyMod(x);\r\n        const c = C + phaseMod(x);\r\n        const d = D;\r\n        const func = carrier;\r\n        return a * func(b * (x + c)) + d;\r\n    };\r\n    return result;\r\n}\r\n\r\nfunction time(x) {\r\n    return timeKeeper.getTimeProgress(x);\r\n}\r\n\r\nfunction timePeriod(x) {\r\n    const totalTimeMs = timeKeeper.getTotalTimeMs();\r\n    return (totalTimeMs % x) / x;\r\n}\r\n\r\nfunction linear(x) {\r\n    return x % 1;\r\n}\r\n\r\n//todo improve this. generate using fft?\r\nfunction sawtooth(x) {\r\n    return linear(x);\r\n}\r\n\r\nfunction sine(x) {\r\n    return Math.sin(x * Math.PI * 2) * 0.5 + 0.5;\r\n}\r\n\r\nfunction triangle(x) {\r\n    return Math.abs(((0.5 + x) % 1) - 0.5) * 2;\r\n}\r\n\r\n//todo this looks wrong. test\r\nfunction square(x) {\r\n    Math.sign(sine(x));\r\n}\r\n\r\n//todo: make this periodic\r\nfunction round(x) {\r\n    const y = x % 1;\r\n    const rad = Math.PI / 2;\r\n    const down = 3 * rad;\r\n    const turn = y * rad;\r\n    return 1 + Math.sin(down + turn);\r\n}\r\n\r\n//linear from 1 (exclusive) down to 0 (inclusive)\r\nfunction reverse(x) {\r\n    return 1 - Number.EPSILON - x;\r\n}\r\n\r\nfunction smoothStep(x) {\r\n    const y = x % 1;\r\n    return y * y * (3 - 2 * y);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/wave.js\n **/","let totalTimeMs = 0;\r\nlet lastDeltaMs = 0;\r\n\r\nexport function updateTime(deltaMs) {\r\n    lastDeltaMs = deltaMs;\r\n    totalTimeMs += deltaMs;\r\n}\r\n\r\n//todo: can this be shuffled around to improve the performance?\r\nexport function getTimeProgress(frequencyHz) {\r\n    var periodMs = 1000 / frequencyHz;\r\n    return (totalTimeMs % periodMs) / periodMs;\r\n}\r\n\r\nexport function getTotalTimeMs() {\r\n    return totalTimeMs;\r\n}\r\n\r\nexport function getLastDeltaMs() {\r\n    return lastDeltaMs;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/timeKeeper.js\n **/","import FastSimplexNoise from \"fast-simplex-noise\";\r\n\r\nconst SimplexNoise = class SimplexNoise {\r\n    constructor(config) {\r\n        const min = config.min || 0;\r\n        const max = config.max || 1;\r\n        const octaves = config.octaves || 1;\r\n        const frequency = config.frequency || 1;\r\n        const gen = new FastSimplexNoise({\r\n            octaves,\r\n            min,\r\n            max,\r\n            frequency\r\n        });\r\n        this.generator = gen;\r\n    }\r\n\r\n    in2D(x, y) {\r\n        return this.generator.in2D(x, y);\r\n    }\r\n\r\n    /**\r\n     * pixelFunc is function(x, y, value) and should return an array of 3 integers (0-255) (rgb)\r\n     */\r\n    getFilledImageData(screen, pixelFunc) {\r\n        const imageData = screen.makeImageData();\r\n        const data = imageData.data;\r\n        const width = screen.width;\r\n        for(var i = 0; i < data.length; i += 4) {\r\n            const x = (i / 4) % width;\r\n            const y = Math.floor((i / 4) / width);\r\n            const tone = this.generator.in2D(x, y);\r\n            const userPixel = pixelFunc(x, y, tone);\r\n            data[i] = Math.floor(userPixel[0] * 255);\r\n            data[i + 1] = Math.floor(userPixel[1] * 255);\r\n            data[i + 2] = Math.floor(userPixel[2] * 255);\r\n            data[i + 3] = 255; //alpha\r\n        }\r\n        return imageData;\r\n    }\r\n};\r\n\r\nexport default SimplexNoise;\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/simplexNoise.js\n **/","/*\n * A speed-improved simplex noise algorithm for 2D, 3D and 4D in JavaScript.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n */\n\n// Data ------------------------------------------------------------------------\n\nvar G2 = (3.0 - Math.sqrt(3.0)) / 6.0\nvar G3 = 1.0 / 6.0\nvar G4 = (5.0 - Math.sqrt(5.0)) / 20.0\n\nvar GRAD3 = [\n  [1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0],\n  [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1],\n  [0, 1, 1], [0, -1, -1], [0, 1, -1], [0, -1, -1]\n]\n\nvar GRAD4 = [\n  [0, 1, 1, 1], [0, 1, 1, -1], [0, 1, -1, 1], [0, 1, -1, -1],\n  [0, -1, 1, 1], [0, -1, 1, -1], [0, -1, -1, 1], [0, -1, -1, -1],\n  [1, 0, 1, 1], [1, 0, 1, -1], [1, 0, -1, 1], [1, 0, -1, -1],\n  [-1, 0, 1, 1], [-1, 0, 1, -1], [-1, 0, -1, 1], [-1, 0, -1, -1],\n  [1, 1, 0, 1], [1, 1, 0, -1], [1, -1, 0, 1], [1, -1, 0, -1],\n  [-1, 1, 0, 1], [-1, 1, 0, -1], [-1, -1, 0, 1], [-1, -1, 0, -1],\n  [1, 1, 1, 0], [1, 1, -1, 0], [1, -1, 1, 0], [1, -1, -1, 0],\n  [-1, 1, 1, 0], [-1, 1, -1, 0], [-1, -1, 1, 0], [-1, -1, -1, 0]\n]\n\n// Exports ---------------------------------------------------------------------\n\nif (typeof module !== 'undefined') module.exports = FastSimplexNoise\n\n// Functions -------------------------------------------------------------------\n\nfunction FastSimplexNoise (options) {\n  if (!options) options = {}\n\n  this.amplitude = options.amplitude || 1.0\n  this.frequency = options.frequency || 1.0\n  this.octaves = parseInt(options.octaves || 1)\n  this.persistence = options.persistence || 0.5\n  this.random = options.random || Math.random\n\n  if (typeof options.min === 'number' && typeof options.max === 'number') {\n    if (options.min >= options.max) {\n      console.error('options.min must be less than options.max')\n    } else {\n      var min = parseFloat(options.min)\n      var max = parseFloat(options.max)\n      var range = max - min\n      this.scale = function (value) {\n        return min + ((value + 1) / 2) * range\n      }\n    }\n  } else {\n    this.scale = function (value) {\n      return value\n    }\n  }\n\n  var i\n  var p = new Uint8Array(256)\n  for (i = 0; i < 256; i++) {\n    p[i] = i\n  }\n\n  var n, q\n  for (i = 255; i > 0; i--) {\n    n = Math.floor((i + 1) * this.random())\n    q = p[i]\n    p[i] = p[n]\n    p[n] = q\n  }\n\n  // To remove the need for index wrapping, double the permutation table length\n  this.perm = new Uint8Array(512)\n  this.permMod12 = new Uint8Array(512)\n  for (i = 0; i < 512; i++) {\n    this.perm[i] = p[i & 255]\n    this.permMod12[i] = this.perm[i] % 12\n  }\n}\n\nFastSimplexNoise.prototype.cylindrical2D = function (c, x, y) {\n  var nx = x / c\n  var r = c / (2 * Math.PI)\n  var rdx = nx * 2 * Math.PI\n  var a = r * Math.sin(rdx)\n  var b = r * Math.cos(rdx)\n\n  return this.in3D(a, b, y)\n}\n\nFastSimplexNoise.prototype.cylindrical3D = function (c, x, y, z) {\n  var nx = x / c\n  var r = c / (2 * Math.PI)\n  var rdx = nx * 2 * Math.PI\n  var a = r * Math.sin(rdx)\n  var b = r * Math.cos(rdx)\n\n  return this.in4D(a, b, y, z)\n}\n\nFastSimplexNoise.prototype.in2D = function (x, y) {\n  var amplitude = this.amplitude\n  var frequency = this.frequency\n  var maxAmplitude = 0\n  var noise = 0\n  var persistence = this.persistence\n\n  for (var i = 0; i < this.octaves; i++) {\n    noise += this.raw2D(x * frequency, y * frequency) * amplitude\n    maxAmplitude += amplitude\n    amplitude *= persistence\n    frequency *= 2\n  }\n\n  var value = noise / maxAmplitude\n  return this.scale(value)\n}\n\nFastSimplexNoise.prototype.in3D = function (x, y, z) {\n  var amplitude = this.amplitude\n  var frequency = this.frequency\n  var maxAmplitude = 0\n  var noise = 0\n  var persistence = this.persistence\n\n  for (var i = 0; i < this.octaves; i++) {\n    noise += this.raw3D(x * frequency, y * frequency, z * frequency) * amplitude\n    maxAmplitude += amplitude\n    amplitude *= persistence\n    frequency *= 2\n  }\n\n  var value = noise / maxAmplitude\n  return this.scale(value)\n}\n\nFastSimplexNoise.prototype.in4D = function (x, y, z, w) {\n  var amplitude = this.amplitude\n  var frequency = this.frequency\n  var maxAmplitude = 0\n  var noise = 0\n  var persistence = this.persistence\n\n  for (var i = 0; i < this.octaves; i++) {\n    noise += this.raw4D(x * frequency, y * frequency, z * frequency, w * frequency) * amplitude\n    maxAmplitude += amplitude\n    amplitude *= persistence\n    frequency *= 2\n  }\n\n  var value = noise / maxAmplitude\n  return this.scale(value)\n}\n\nFastSimplexNoise.prototype.raw2D = function (x, y) {\n  var perm = this.perm\n  var permMod12 = this.permMod12\n\n  var n0, n1, n2 // Noise contributions from the three corners\n\n  // Skew the input space to determine which simplex cell we're in\n  var s = (x + y) * 0.5 * (Math.sqrt(3.0) - 1.0) // Hairy factor for 2D\n  var i = Math.floor(x + s)\n  var j = Math.floor(y + s)\n  var t = (i + j) * G2\n  var X0 = i - t // Unskew the cell origin back to (x,y) space\n  var Y0 = j - t\n  var x0 = x - X0 // The x,y distances from the cell origin\n  var y0 = y - Y0\n\n  // For the 2D case, the simplex shape is an equilateral triangle.\n  // Determine which simplex we are in.\n  var i1, j1 // Offsets for second (middle) corner of simplex in (i,j) coords\n  if (x0 > y0) { // Lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1 = 1\n    j1 = 0\n  } else { // Upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1 = 0\n    j1 = 1\n  }\n\n  // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n  // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n  // c = (3 - sqrt(3)) / 6\n\n  var x1 = x0 - i1 + G2 // Offsets for middle corner in (x,y) unskewed coords\n  var y1 = y0 - j1 + G2\n  var x2 = x0 - 1.0 + 2.0 * G2 // Offsets for last corner in (x,y) unskewed coords\n  var y2 = y0 - 1.0 + 2.0 * G2\n\n  // Work out the hashed gradient indices of the three simplex corners\n  var ii = i & 255\n  var jj = j & 255\n  var gi0 = permMod12[ii + perm[jj]]\n  var gi1 = permMod12[ii + i1 + perm[jj + j1]]\n  var gi2 = permMod12[ii + 1 + perm[jj + 1]]\n\n  // Calculate the contribution from the three corners\n  var t0 = 0.5 - x0 * x0 - y0 * y0\n  if (t0 < 0) {\n    n0 = 0.0\n  } else {\n    t0 *= t0\n    // (x,y) of 3D gradient used for 2D gradient\n    n0 = t0 * t0 * dot2D(GRAD3[gi0], x0, y0)\n  }\n  var t1 = 0.5 - x1 * x1 - y1 * y1\n  if (t1 < 0) {\n    n1 = 0.0\n  } else {\n    t1 *= t1\n    n1 = t1 * t1 * dot2D(GRAD3[gi1], x1, y1)\n  }\n  var t2 = 0.5 - x2 * x2 - y2 * y2\n  if (t2 < 0) {\n    n2 = 0.0\n  } else {\n    t2 *= t2\n    n2 = t2 * t2 * dot2D(GRAD3[gi2], x2, y2)\n  }\n\n  // Add contributions from each corner to get the final noise value.\n  // The result is scaled to return values in the interval [-1, 1]\n  return 70.14805770654148 * (n0 + n1 + n2)\n}\n\nFastSimplexNoise.prototype.raw3D = function (x, y, z) {\n  var perm = this.perm\n  var permMod12 = this.permMod12\n\n  var n0, n1, n2, n3 // Noise contributions from the four corners\n\n  // Skew the input space to determine which simplex cell we're in\n  var s = (x + y + z) / 3.0 // Very nice and simple skew factor for 3D\n  var i = Math.floor(x + s)\n  var j = Math.floor(y + s)\n  var k = Math.floor(z + s)\n  var t = (i + j + k) * G3\n  var X0 = i - t // Unskew the cell origin back to (x,y,z) space\n  var Y0 = j - t\n  var Z0 = k - t\n  var x0 = x - X0 // The x,y,z distances from the cell origin\n  var y0 = y - Y0\n  var z0 = z - Z0\n\n  // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n  // Determine which simplex we are in.\n  var i1, j1, k1 // Offsets for second corner of simplex in (i,j,k) coords\n  var i2, j2, k2 // Offsets for third corner of simplex in (i,j,k) coords\n  if (x0 >= y0) {\n    if (y0 >= z0) { // X Y Z order\n      i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 1; k2 = 0\n    } else if (x0 >= z0) { // X Z Y order\n      i1 = 1; j1 = 0; k1 = 0; i2 = 1; j2 = 0; k2 = 1\n    } else { // Z X Y order\n      i1 = 0; j1 = 0; k1 = 1; i2 = 1; j2 = 0; k2 = 1\n    }\n  } else { // x0 < y0\n    if (y0 < z0) { // Z Y X order\n      i1 = 0; j1 = 0; k1 = 1; i2 = 0; j2 = 1; k2 = 1\n    } else if (x0 < z0) { // Y Z X order\n      i1 = 0; j1 = 1; k1 = 0; i2 = 0; j2 = 1; k2 = 1\n    } else { // Y X Z order\n      i1 = 0; j1 = 1; k1 = 0; i2 = 1; j2 = 1; k2 = 0\n    }\n  }\n\n  // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n  // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n  // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n  // c = 1/6.\n  var x1 = x0 - i1 + G3 // Offsets for second corner in (x,y,z) coords\n  var y1 = y0 - j1 + G3\n  var z1 = z0 - k1 + G3\n  var x2 = x0 - i2 + 2.0 * G3 // Offsets for third corner in (x,y,z) coords\n  var y2 = y0 - j2 + 2.0 * G3\n  var z2 = z0 - k2 + 2.0 * G3\n  var x3 = x0 - 1.0 + 3.0 * G3 // Offsets for last corner in (x,y,z) coords\n  var y3 = y0 - 1.0 + 3.0 * G3\n  var z3 = z0 - 1.0 + 3.0 * G3\n\n  // Work out the hashed gradient indices of the four simplex corners\n  var ii = i & 255\n  var jj = j & 255\n  var kk = k & 255\n  var gi0 = permMod12[ii + perm[jj + perm[kk]]]\n  var gi1 = permMod12[ii + i1 + perm[jj + j1 + perm[kk + k1]]]\n  var gi2 = permMod12[ii + i2 + perm[jj + j2 + perm[kk + k2]]]\n  var gi3 = permMod12[ii + 1 + perm[jj + 1 + perm[kk + 1]]]\n\n  // Calculate the contribution from the four corners\n  var t0 = 0.5 - x0 * x0 - y0 * y0 - z0 * z0\n  if (t0 < 0) {\n    n0 = 0.0\n  } else {\n    t0 *= t0\n    n0 = t0 * t0 * dot3D(GRAD3[gi0], x0, y0, z0)\n  }\n  var t1 = 0.5 - x1 * x1 - y1 * y1 - z1 * z1\n  if (t1 < 0) {\n    n1 = 0.0\n  } else {\n    t1 *= t1\n    n1 = t1 * t1 * dot3D(GRAD3[gi1], x1, y1, z1)\n  }\n  var t2 = 0.5 - x2 * x2 - y2 * y2 - z2 * z2\n  if (t2 < 0) {\n    n2 = 0.0\n  } else {\n    t2 *= t2\n    n2 = t2 * t2 * dot3D(GRAD3[gi2], x2, y2, z2)\n  }\n  var t3 = 0.5 - x3 * x3 - y3 * y3 - z3 * z3\n  if (t3 < 0) {\n    n3 = 0.0\n  } else {\n    t3 *= t3\n    n3 = t3 * t3 * dot3D(GRAD3[gi3], x3, y3, z3)\n  }\n\n  // Add contributions from each corner to get the final noise value.\n  // The result is scaled to stay just inside [-1,1]\n  return 94.68493150681972 * (n0 + n1 + n2 + n3)\n}\n\nFastSimplexNoise.prototype.raw4D = function (x, y, z, w) {\n  var perm = this.perm\n\n  var n0, n1, n2, n3, n4 // Noise contributions from the five corners\n\n  // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n  var s = (x + y + z + w) * (Math.sqrt(5.0) - 1.0) / 4.0 // Factor for 4D skewing\n  var i = Math.floor(x + s)\n  var j = Math.floor(y + s)\n  var k = Math.floor(z + s)\n  var l = Math.floor(w + s)\n  var t = (i + j + k + l) * G4 // Factor for 4D unskewing\n  var X0 = i - t // Unskew the cell origin back to (x,y,z,w) space\n  var Y0 = j - t\n  var Z0 = k - t\n  var W0 = l - t\n  var x0 = x - X0  // The x,y,z,w distances from the cell origin\n  var y0 = y - Y0\n  var z0 = z - Z0\n  var w0 = w - W0\n\n  // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n  // To find out which of the 24 possible simplices we're in, we need to\n  // determine the magnitude ordering of x0, y0, z0 and w0.\n  // Six pair-wise comparisons are performed between each possible pair\n  // of the four coordinates, and the results are used to rank the numbers.\n  var rankx = 0\n  var ranky = 0\n  var rankz = 0\n  var rankw = 0\n  if (x0 > y0) {\n    rankx++\n  } else {\n    ranky++\n  }\n  if (x0 > z0) {\n    rankx++\n  } else {\n    rankz++\n  }\n  if (x0 > w0) {\n    rankx++\n  } else {\n    rankw++\n  }\n  if (y0 > z0) {\n    ranky++\n  } else {\n    rankz++\n  }\n  if (y0 > w0) {\n    ranky++\n  } else {\n    rankw++\n  }\n  if (z0 > w0) {\n    rankz++\n  } else {\n    rankw++\n  }\n  var i1, j1, k1, l1 // The integer offsets for the second simplex corner\n  var i2, j2, k2, l2 // The integer offsets for the third simplex corner\n  var i3, j3, k3, l3 // The integer offsets for the fourth simplex corner\n\n  // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n  // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n  // impossible. Only the 24 indices which have non-zero entries make any sense.\n  // We use a thresholding to set the coordinates in turn from the largest magnitude.\n  // Rank 3 denotes the largest coordinate.\n  i1 = rankx >= 3 ? 1 : 0\n  j1 = ranky >= 3 ? 1 : 0\n  k1 = rankz >= 3 ? 1 : 0\n  l1 = rankw >= 3 ? 1 : 0\n  // Rank 2 denotes the second largest coordinate.\n  i2 = rankx >= 2 ? 1 : 0\n  j2 = ranky >= 2 ? 1 : 0\n  k2 = rankz >= 2 ? 1 : 0\n  l2 = rankw >= 2 ? 1 : 0\n  // Rank 1 denotes the second smallest coordinate.\n  i3 = rankx >= 1 ? 1 : 0\n  j3 = ranky >= 1 ? 1 : 0\n  k3 = rankz >= 1 ? 1 : 0\n  l3 = rankw >= 1 ? 1 : 0\n\n  // The fifth corner has all coordinate offsets = 1, so no need to compute that.\n  var x1 = x0 - i1 + G4 // Offsets for second corner in (x,y,z,w) coords\n  var y1 = y0 - j1 + G4\n  var z1 = z0 - k1 + G4\n  var w1 = w0 - l1 + G4\n  var x2 = x0 - i2 + 2.0 * G4 // Offsets for third corner in (x,y,z,w) coords\n  var y2 = y0 - j2 + 2.0 * G4\n  var z2 = z0 - k2 + 2.0 * G4\n  var w2 = w0 - l2 + 2.0 * G4\n  var x3 = x0 - i3 + 3.0 * G4 // Offsets for fourth corner in (x,y,z,w) coords\n  var y3 = y0 - j3 + 3.0 * G4\n  var z3 = z0 - k3 + 3.0 * G4\n  var w3 = w0 - l3 + 3.0 * G4\n  var x4 = x0 - 1.0 + 4.0 * G4 // Offsets for last corner in (x,y,z,w) coords\n  var y4 = y0 - 1.0 + 4.0 * G4\n  var z4 = z0 - 1.0 + 4.0 * G4\n  var w4 = w0 - 1.0 + 4.0 * G4\n\n  // Work out the hashed gradient indices of the five simplex corners\n  var ii = i & 255\n  var jj = j & 255\n  var kk = k & 255\n  var ll = l & 255\n  var gi0 = perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32\n  var gi1 = perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32\n  var gi2 = perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32\n  var gi3 = perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32\n  var gi4 = perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32\n\n  // Calculate the contribution from the five corners\n  var t0 = 0.5 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0\n  if (t0 < 0) {\n    n0 = 0.0\n  } else {\n    t0 *= t0\n    n0 = t0 * t0 * dot4D(GRAD4[gi0], x0, y0, z0, w0)\n  }\n  var t1 = 0.5 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1\n  if (t1 < 0) {\n    n1 = 0.0\n  } else {\n    t1 *= t1\n    n1 = t1 * t1 * dot4D(GRAD4[gi1], x1, y1, z1, w1)\n  }\n  var t2 = 0.5 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2\n  if (t2 < 0) {\n    n2 = 0.0\n  } else {\n    t2 *= t2\n    n2 = t2 * t2 * dot4D(GRAD4[gi2], x2, y2, z2, w2)\n  }\n  var t3 = 0.5 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3\n  if (t3 < 0) {\n    n3 = 0.0\n  } else {\n    t3 *= t3\n    n3 = t3 * t3 * dot4D(GRAD4[gi3], x3, y3, z3, w3)\n  }\n  var t4 = 0.5 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4\n  if (t4 < 0) {\n    n4 = 0.0\n  } else {\n    t4 *= t4\n    n4 = t4 * t4 * dot4D(GRAD4[gi4], x4, y4, z4, w4)\n  }\n\n  // Sum up and scale the result to cover the range [-1,1]\n  return 72.37857097679466 * (n0 + n1 + n2 + n3 + n4)\n}\n\nFastSimplexNoise.prototype.spherical2D = function (c, x, y) {\n  var nx = x / c\n  var ny = y / c\n  var rdx = nx * 2 * Math.PI\n  var rdy = ny * Math.PI\n  var sinY = Math.sin(rdy + Math.PI)\n  var sinRds = 2 * Math.PI\n  var a = sinRds * Math.sin(rdx) * sinY\n  var b = sinRds * Math.cos(rdx) * sinY\n  var d = sinRds * Math.cos(rdy)\n\n  return this.in3D(a, b, d)\n}\n\nFastSimplexNoise.prototype.spherical3D = function (c, x, y, z) {\n  var nx = x / c\n  var ny = y / c\n  var rdx = nx * 2 * Math.PI\n  var rdy = ny * Math.PI\n  var sinY = Math.sin(rdy + Math.PI)\n  var sinRds = 2 * Math.PI\n  var a = sinRds * Math.sin(rdx) * sinY\n  var b = sinRds * Math.cos(rdx) * sinY\n  var d = sinRds * Math.cos(rdy)\n\n  return this.in4D(a, b, d, z)\n}\n\nfunction dot2D (g, x, y) {\n  return g[0] * x + g[1] * y\n}\n\nfunction dot3D (g, x, y, z) {\n  return g[0] * x + g[1] * y + g[2] * z\n}\n\nfunction dot4D (g, x, y, z, w) {\n  return g[0] * x + g[1] * y + g[2] * z + g[3] * w\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/fast-simplex-noise/main.js\n ** module id = 13\n ** module chunks = 0\n **/","import wave from \"../core/wave.js\";\r\nimport settings from \"../settings.js\";\r\nimport * as utility from \"../core/utility.js\";\r\nimport MotionComponent from \"../core/motionComponent.js\";\r\nimport * as timeKeeper from \"../core/timeKeeper.js\";\r\n\r\nconst Panel = class Panel {\r\n    //seedValue is from 0 (large, slow panel) to 1 (small, fast panel)\r\n    //position is its starting position according to the pre-computed layout\r\n    //midPanelSize is the length of one side of a square panel with seedValue 0.5\r\n    constructor(seedValue, position, midPanelSize, fieldDiameter) {\r\n        const now = timeKeeper.getTotalTimeMs();\r\n        const maxVelocity = fieldDiameter / 1000 * utility.scale(seedValue, settings.panels.maxSpeed.min, settings.panels.maxSpeed.max);\r\n        const sizeVariation = settings.panels.sizeVariation;\r\n        const sizeMax = midPanelSize * sizeVariation;\r\n        const sizeMin = midPanelSize * (1 / sizeVariation);\r\n        const squareSide = utility.scale(1 - seedValue, sizeMin, sizeMax);\r\n        const halfSkew = settings.panels.maxRatioSkew / 2;\r\n        const skew = 1 + utility.randomNumber(-halfSkew, halfSkew);\r\n        const width = squareSide * skew;\r\n        const height = squareSide * (1 / skew);\r\n        const minIdle = utility.scale(1 - seedValue, settings.panels.minIdle.min, settings.panels.minIdle.max);\r\n        const maxIdle = utility.scale(1 - seedValue, settings.panels.maxIdle.min, settings.panels.maxIdle.max);\r\n        const departAtMs = now + utility.randomInt(0, maxIdle);\r\n        const motion = new MotionComponent({position, maxVelocity});\r\n        motion.idleSince = now - utility.randomInt(500, 5000);\r\n        //todo: also needs mass, and acceleration\r\n\r\n        this.x = Math.round(position.x);\r\n        this.y = Math.round(position.y);\r\n        this.width = Math.round(width);\r\n        this.height = Math.round(height);\r\n        this.layoutNode = position;\r\n        this.seed = seedValue;\r\n        this.minIdle = minIdle;\r\n        this.maxIdle = maxIdle;\r\n        this.changeAtTotalMs = departAtMs;\r\n        this.motion = motion;\r\n        // this.texture = undefined;\r\n\r\n        //const colorLightness = Math.floor(utility.scale(seedValue, 50, 230));\r\n        //this.color = \"rgb(\" + colorLightness + \",\" + colorLightness + \",\" + colorLightness + \")\";\r\n        this.color = seedValue < 0.15\r\n            ? settings.panels.color1\r\n            : seedValue < 0.4\r\n            ? settings.panels.color2\r\n            : seedValue < 0.94\r\n            ? settings.panels.color3\r\n            : settings.panels.color4;\r\n    }\r\n};\r\n\r\nexport default Panel;\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/panel.js\n **/","import * as timeKeeper from \"./timeKeeper.js\";\r\nimport wave from \"./wave.js\";\r\n\r\nconst MotionComponent = class MotionComponent {\r\n    constructor(config) {\r\n        if(!config) { config = {}; }\r\n        //todo: error if position doesn't exist\r\n        const xpos = config.position.x || 0;\r\n        const ypos = config.position.y || 0;\r\n        const mass = config.mass || 100;\r\n        const maxVelocity = config.maxVelocity || 10;\r\n        const maxAcceleration = config.maxAcceleration || 1;\r\n\r\n        this.xpos = xpos;\r\n        this.ypos = ypos;\r\n        this.xvel = 0;\r\n        this.yvel = 0;\r\n        this.targetX = xpos;\r\n        this.targetY = ypos;\r\n        this.moving = false;\r\n        this.idleSince = 0;\r\n\r\n        this.mass = mass;\r\n        this.maxVelocity = maxVelocity;\r\n        this.maxAcceleration = maxAcceleration;\r\n        this.move = nullMovement;\r\n    }\r\n\r\n    update() {\r\n        this.move();\r\n    }\r\n\r\n    /**\r\n     * successive updates will move from current position, straight to destination,\r\n     * arriving in tripLengthMs milliseconds. At each time step, position will be a linear\r\n     * interpolation between the start and end points, according to time passed.\r\n     * A motion function x => y can be supplied, which maps the constant linear movement\r\n     * to some other curve (eg smoothstep). motion does not affect the path to the\r\n     * destination, only the movement upon it. For example, passing a triangle function to\r\n     * motion would result in a constant-speed, round-trip to the destination and back.\r\n     * After tripLengthMs has passed, movement will cease.\r\n     */\r\n    fixedAnimateToward(destination, tripLengthMs, motion) {\r\n        if(tripLengthMs <= 0) {\r\n            this.moving = false;\r\n            this.move = nullMovement;\r\n        }\r\n        const moveMap = motion || wave.linear;\r\n        const xorigin = this.xpos;\r\n        const yorigin = this.ypos;\r\n        const xtarget = destination.x;\r\n        const ytarget = destination.y;\r\n        const beginTime = timeKeeper.getTotalTimeMs();\r\n        const moveFunc = () => {\r\n            const now = timeKeeper.getTotalTimeMs();\r\n            const percentDone = (now - beginTime) / tripLengthMs;\r\n            if(percentDone >= 1.0) {\r\n                this.xpos = xtarget;\r\n                this.ypos = ytarget;\r\n                this.move = nullMovement;\r\n                this.moving = false;\r\n                this.idleSince = now;\r\n            }\r\n            else {\r\n                const value = moveMap(percentDone);\r\n                const newX = xorigin + (xtarget - xorigin) * value;\r\n                const newY = yorigin + (ytarget - yorigin) * value;\r\n                this.xpos = newX;\r\n                this.ypos = newY;\r\n            }\r\n        };\r\n        this.move = moveFunc;\r\n        this.moving = true;\r\n        this.idleSince = 0;\r\n    }\r\n\r\n    /**\r\n     * successive updates will accelerate toward the supplied destination.\r\n     * acceleration amount is defined by maxAcceleration.\r\n     */\r\n    followPoint(destination) {\r\n\r\n    }\r\n\r\n    /**\r\n     * update position according to supplied acceleration, and this object's velocity.\r\n     */\r\n    accelerateInDirection(acceleration) {\r\n\r\n    }\r\n};\r\n\r\nfunction nullMovement() {}\r\n\r\nexport default MotionComponent;\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/motionComponent.js\n **/","import * as utility from \"../core/utility.js\";\r\nimport wave from \"../core/wave.js\";\r\nimport * as timeKeeper from \"../core/timeKeeper.js\";\r\nimport settings from \"../settings.js\";\r\nimport Panel from \"./panel.js\";\r\nimport GridLayout from \"./gridLayout.js\";\r\n\r\nconst PanelLayer1 = class PanelLayer1 {\r\n    constructor(bounds) {\r\n        const panelCount = settings.panels.count;\r\n        const width = bounds.width;\r\n        const height = bounds.height;\r\n        //grid positions are relative to bounds x and y\r\n        const grid = makeGrid(panelCount, bounds);\r\n        const area = width * height;\r\n        const fauxDiameter = (width + height) / 2;\r\n        const panels = makePanels(panelCount, grid, area, fauxDiameter);\r\n        \r\n        this.bounds = bounds;\r\n        this.grid = grid;\r\n        this.panels = panels;\r\n    }\r\n\r\n    update() {\r\n        const screenSize = (this.bounds.width + this.bounds.height) / 2;\r\n        const now = timeKeeper.getTotalTimeMs();\r\n        const swayPauseMs = utility.randomInt(500, 5000);\r\n        for(let i = 0; i < this.panels.length; i++) {\r\n            const panel = this.panels[i];\r\n            if(!panel.motion.moving) {\r\n                if(panel.changeAtTotalMs <= now) {\r\n                    const nodeSpot = panel.layoutNode;\r\n                    this.grid.changePosition(nodeSpot);\r\n                    const distanceToTarget = utility.distance(nodeSpot, {x: panel.x, y: panel.y});\r\n                    const tripLengthMs = distanceToTarget / panel.motion.maxVelocity;\r\n                    const idleAfter = utility.randomNumber(panel.minIdle, panel.maxIdle);\r\n                    panel.changeAtTotalMs = now + tripLengthMs + idleAfter;\r\n                    panel.motion.fixedAnimateToward(nodeSpot, tripLengthMs, wave.smooth);\r\n                }\r\n                else if(now - panel.motion.idleSince > swayPauseMs){\r\n                    const xscale = panel.width / 12;\r\n                    const yscale = panel.height / 20;\r\n                    // const xShift = utility.randomNumber(-xscale, xscale);\r\n                    // const yShift = utility.randomNumber(-yscale, yscale);\r\n                    const xShift = utility.randomNumber(-12, 12);\r\n                    const yShift = utility.randomNumber(-6, 6);\r\n                    const destination = {x: panel.layoutNode.x + xShift, y: panel.layoutNode.y + yShift};\r\n                    const timeScale = utility.scale(panel.seed, 4500, 2000);\r\n                    const tripLengthMs = utility.randomNumber(timeScale - timeScale / 4, timeScale + timeScale / 4);\r\n                    panel.motion.fixedAnimateToward(destination, tripLengthMs, wave.smooth);\r\n                }\r\n            }\r\n            panel.motion.update();\r\n            panel.x = Math.round(panel.motion.xpos + this.bounds.x - panel.width / 2);\r\n            panel.y = Math.round(panel.motion.ypos + this.bounds.y - panel.height / 2);\r\n        }\r\n    }\r\n\r\n    getPanelsForDraw() {\r\n        return this.panels;\r\n    }\r\n};\r\n\r\nfunction makeGrid(panelCount, bounds) {\r\n    const emptyGridPercent = settings.panels.emptyGridPercent;\r\n    const totalSlots = Math.ceil(panelCount * (1 + emptyGridPercent));\r\n    const result = new GridLayout(totalSlots, bounds.width, bounds.height);\r\n    return result;\r\n}\r\n\r\nfunction makePanels(count, grid, fieldArea, fieldDiameter) {\r\n    const positions = grid.getNewPositions(count);\r\n    //let's make 1/4 of the panel values uniformly distributed, and the rest random.\r\n    const uniformPortion = Math.floor(count / 4);\r\n    const slice = 1 / uniformPortion;\r\n    const offset = slice / 2;\r\n    const midPanelSize = calculateMidPanelSize(count, fieldArea);\r\n    const result = Array.from({length: count}, (v, k) => {\r\n        const position = positions[k];\r\n        if(k < uniformPortion) {\r\n            const value = offset + slice * k; //uniform values\r\n            return new Panel(value, position, midPanelSize, fieldDiameter);\r\n        }\r\n        const value = utility.randomNumber(0.1, 0.99); //random values\r\n        return new Panel(value, position, midPanelSize, fieldDiameter);\r\n    });\r\n    result.sort((a,b) => a.seed - b.seed);\r\n    calculatePanelTextures(result); //todo: move this to inside map also\r\n    return result;\r\n}\r\n\r\nfunction calculateMidPanelSize(panelCount, fieldArea) {\r\n    const midSize = Math.sqrt(fieldArea * settings.panels.visualDensityPercent / panelCount);\r\n    return midSize;\r\n}\r\n\r\nfunction calculatePanelTextures(panels) {\r\n\r\n}\r\n\r\nexport default PanelLayer1;\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/panelLayer1.js\n **/","import wave from \"../core/wave.js\";\r\nimport shuffle from \"lodash/shuffle\"; \r\n\r\nconst GridLayout = class GridLayout {\r\n    constructor(slotCount, width, height) {\r\n        const positions = createPositions(slotCount, width, height);\r\n        const empties = shuffle(positions);\r\n        this.empty = empties;\r\n    }\r\n\r\n    getNewPositions(n) {\r\n        const take = this.empty.slice(0, n);\r\n        const rest = this.empty.slice(n);\r\n        this.empty = rest;\r\n        return take;\r\n    }\r\n\r\n    //changes parameter in-place to a new position, and returns it\r\n    //could change this to a counter that says which empty is next, instead of modifying the array every time.\r\n    changePosition(oldPosition) {\r\n        const next = this.empty.shift();\r\n        //swap\r\n        const a = oldPosition;\r\n        const b = next;\r\n        [a.x, b.x] = [b.x, a.x];\r\n        [a.y, b.y] = [b.y, a.y];\r\n        this.empty.push(next);\r\n        return oldPosition;\r\n    }\r\n};\r\n\r\nfunction createPositions(slotCount, width, height) {\r\n    const half = Math.sqrt(slotCount);    \r\n    const screenRatio = width / height;\r\n    const columns = Math.floor(half * screenRatio);\r\n    //const rows = Math.floor((1 / screenRatio) * half);\r\n    const rows = slotCount / columns;\r\n    const result = [];\r\n    const rise = height / rows;\r\n    const run = width / columns;\r\n    for(let i = 0; i < columns; i++) {\r\n        for(let j = 0; j < rows; j++) {\r\n            const x = run * (i + 0.5);\r\n            const y = rise * (j + 0.5);\r\n            const newPosition = {x, y};\r\n            result.push(newPosition);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport default GridLayout;\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/gridLayout.js\n **/","var arrayShuffle = require('./_arrayShuffle'),\n    baseShuffle = require('./_baseShuffle'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of shuffled values, using a version of the\n * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n * @example\n *\n * _.shuffle([1, 2, 3, 4]);\n * // => [4, 1, 3, 2]\n */\nfunction shuffle(collection) {\n  var func = isArray(collection) ? arrayShuffle : baseShuffle;\n  return func(collection);\n}\n\nmodule.exports = shuffle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/shuffle.js\n ** module id = 18\n ** module chunks = 0\n **/","var copyArray = require('./_copyArray'),\n    shuffleSelf = require('./_shuffleSelf');\n\n/**\n * A specialized version of `_.shuffle` for arrays.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction arrayShuffle(array) {\n  return shuffleSelf(copyArray(array));\n}\n\nmodule.exports = arrayShuffle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_arrayShuffle.js\n ** module id = 19\n ** module chunks = 0\n **/","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_copyArray.js\n ** module id = 20\n ** module chunks = 0\n **/","var baseRandom = require('./_baseRandom');\n\n/**\n * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @param {number} [size=array.length] The size of `array`.\n * @returns {Array} Returns `array`.\n */\nfunction shuffleSelf(array, size) {\n  var index = -1,\n      length = array.length,\n      lastIndex = length - 1;\n\n  size = size === undefined ? length : size;\n  while (++index < size) {\n    var rand = baseRandom(index, lastIndex),\n        value = array[rand];\n\n    array[rand] = array[index];\n    array[index] = value;\n  }\n  array.length = size;\n  return array;\n}\n\nmodule.exports = shuffleSelf;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_shuffleSelf.js\n ** module id = 21\n ** module chunks = 0\n **/","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeRandom = Math.random;\n\n/**\n * The base implementation of `_.random` without support for returning\n * floating-point numbers.\n *\n * @private\n * @param {number} lower The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the random number.\n */\nfunction baseRandom(lower, upper) {\n  return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n}\n\nmodule.exports = baseRandom;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseRandom.js\n ** module id = 22\n ** module chunks = 0\n **/","var shuffleSelf = require('./_shuffleSelf'),\n    values = require('./values');\n\n/**\n * The base implementation of `_.shuffle`.\n *\n * @private\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction baseShuffle(collection) {\n  return shuffleSelf(values(collection));\n}\n\nmodule.exports = baseShuffle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseShuffle.js\n ** module id = 23\n ** module chunks = 0\n **/","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = values;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/values.js\n ** module id = 24\n ** module chunks = 0\n **/","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseValues.js\n ** module id = 25\n ** module chunks = 0\n **/","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_arrayMap.js\n ** module id = 26\n ** module chunks = 0\n **/","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/keys.js\n ** module id = 27\n ** module chunks = 0\n **/","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_arrayLikeKeys.js\n ** module id = 28\n ** module chunks = 0\n **/","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseTimes.js\n ** module id = 29\n ** module chunks = 0\n **/","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isArguments.js\n ** module id = 30\n ** module chunks = 0\n **/","var isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && objectToString.call(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseIsArguments.js\n ** module id = 31\n ** module chunks = 0\n **/","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isObjectLike.js\n ** module id = 32\n ** module chunks = 0\n **/","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isArray.js\n ** module id = 33\n ** module chunks = 0\n **/","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isBuffer.js\n ** module id = 34\n ** module chunks = 0\n **/","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_root.js\n ** module id = 35\n ** module chunks = 0\n **/","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_freeGlobal.js\n ** module id = 36\n ** module chunks = 0\n **/","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/stubFalse.js\n ** module id = 37\n ** module chunks = 0\n **/","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_isIndex.js\n ** module id = 38\n ** module chunks = 0\n **/","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isTypedArray.js\n ** module id = 39\n ** module chunks = 0\n **/","var isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseIsTypedArray.js\n ** module id = 40\n ** module chunks = 0\n **/","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isLength.js\n ** module id = 41\n ** module chunks = 0\n **/","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseUnary.js\n ** module id = 42\n ** module chunks = 0\n **/","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_nodeUtil.js\n ** module id = 43\n ** module chunks = 0\n **/","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_baseKeys.js\n ** module id = 44\n ** module chunks = 0\n **/","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_isPrototype.js\n ** module id = 45\n ** module chunks = 0\n **/","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_nativeKeys.js\n ** module id = 46\n ** module chunks = 0\n **/","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/_overArg.js\n ** module id = 47\n ** module chunks = 0\n **/","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isArrayLike.js\n ** module id = 48\n ** module chunks = 0\n **/","var isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isFunction.js\n ** module id = 49\n ** module chunks = 0\n **/","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash/isObject.js\n ** module id = 50\n ** module chunks = 0\n **/","import settings from \"../settings.js\";\r\nimport * as textureGen from \"./textureGen.js\";\r\nimport Screen from \"../core/screen.js\";\r\n\r\nconst ScratchpadScene = class ScratchpadScene {\r\n    constructor(screen) {\r\n        this.screen = screen;\r\n        const canvas = screen.canvas;\r\n        const width = canvas.width;\r\n        const height = canvas.height;\r\n        const context = Screen.virtualContext(300, 300 * (height / width));\r\n        this.buffer = context.canvas;\r\n        const virtualScreen = new Screen(context);\r\n        textureGen.draw(virtualScreen);\r\n    }\r\n\r\n    update() {\r\n    }\r\n\r\n    draw() {\r\n        this.screen.drawImageStretch(this.buffer);\r\n    }\r\n};\r\n\r\nexport default ScratchpadScene;\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/scratchpadScene.js\n **/","import * as husl from \"husl\";\r\nimport SimplexNoise from \"../core/simplexNoise.js\";\r\nimport * as utility from \"../core/utility.js\";\r\nimport wave from \"../core/wave.js\";\r\n\r\nexport function draw(screen) {\r\n    const width = screen.width;\r\n    const height = screen.height;\r\n    const noiseGen = new SimplexNoise({\r\n        octaves: 8,\r\n        min: 0,\r\n        max: 1,\r\n        frequency: 1/29\r\n    });\r\n    const distance = distanceFromCenter(width, height);\r\n    const fmod = wave(x => wave.sine(x), {frequency: 5});\r\n    const ripple = wave(x =>\r\n        wave.triangle(wave.sine(x)),\r\n        {frequency: 1/4}\r\n    );\r\n    const imageData = noiseGen.getFilledImageData(screen, (x, y, value) => {\r\n        //const d = distance(x,y);\r\n        const hue = value < 0\r\n            ? value - (value / 2)\r\n            : value;\r\n        const h = ripple(hue) * (103 - 11) + 11;\r\n        const s = 100;\r\n        const light = value < 0\r\n            //? (value * 0.65 + ripple(value) * 0.35)\r\n            ? value - (value / 3)\r\n            : value;\r\n        const l = ripple(light) * (73 - 31) + 31;\r\n        const rgb = husl.toRGB(h, s, l);\r\n        const bytes = rgb;\r\n        return bytes;\r\n    });\r\n    screen.context.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction distanceFromCenter(width, height) {\r\n    const centerX = width / 2;\r\n    const centerY = height / 2;\r\n    const radius = Math.hypot(centerX, centerY);\r\n    const distance = (x,y) => {\r\n        return Math.hypot(x - centerX, y - centerY) / radius;\r\n    };\r\n    return distance;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/scene/textureGen.js\n **/"],"sourceRoot":""}